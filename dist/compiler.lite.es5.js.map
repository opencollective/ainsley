{"version":3,"file":"compiler.lite.es5.js","sources":["../src/libs/checkTypes.js","../src/utils.js","../src/compiler.js"],"sourcesContent":["const messages = {};\nconst predicates = {};\nconst collections = [\"array\", \"arrayLike\", \"iterable\", \"object\"];\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst toString = Object.prototype.toString;\nconst keys = Object.keys;\nconst slice = Array.prototype.slice;\nconst isArray = Array.isArray;\nconst neginf = Number.NEGATIVE_INFINITY;\nconst posinf = Number.POSITIVE_INFINITY;\nconst haveSymbols = typeof Symbol === \"function\";\nconst haveMaps = typeof Map === \"function\";\nconst haveSets = typeof Set === \"function\";\n\nconst fns = [\n  { n: \"equal\", f: equal, s: \"equal {e}\" },\n  { n: \"undefined\", f: isUndefined, s: \"be undefined\" },\n  { n: \"null\", f: isNull, s: \"be null\" },\n  { n: \"assigned\", f: assigned, s: \"be assigned\" },\n  { n: \"primitive\", f: primitive, s: \"be primitive type\" },\n  { n: \"contains\", f: contains, s: \"contain {e}\" },\n  { n: \"in\", f: isIn, s: \"be in {e}\" },\n  { n: \"containsKey\", f: containsKey, s: \"contain key {e}\" },\n  { n: \"keyIn\", f: keyIn, s: \"be key in {e}\" },\n  { n: \"zero\", f: zero, s: \"be 0\" },\n  { n: \"one\", f: one, s: \"be 1\" },\n  { n: \"infinity\", f: infinity, s: \"be infinity\" },\n  { n: \"number\", f: number, s: \"be Number\" },\n  { n: \"integer\", f: integer, s: \"be integer\" },\n  { n: \"float\", f: float, s: \"be non-integer number\" },\n  { n: \"even\", f: even, s: \"be even number\" },\n  { n: \"odd\", f: odd, s: \"be odd number\" },\n  { n: \"greater\", f: greater, s: \"be greater than {e}\" },\n  { n: \"less\", f: less, s: \"be less than {e}\" },\n  { n: \"between\", f: between, s: \"be between {e} and {e2}\" },\n  {\n    n: \"greaterOrEqual\",\n    f: greaterOrEqual,\n    s: \"be greater than or equal to {e}\"\n  },\n  { n: \"lessOrEqual\", f: lessOrEqual, s: \"be less than or equal to {e}\" },\n  { n: \"inRange\", f: inRange, s: \"be in the range {e} to {e2}\" },\n  { n: \"positive\", f: positive, s: \"be positive number\" },\n  { n: \"negative\", f: negative, s: \"be negative number\" },\n  { n: \"string\", f: string, s: \"be String\" },\n  { n: \"emptyString\", f: emptyString, s: \"be empty string\" },\n  { n: \"nonEmptyString\", f: nonEmptyString, s: \"be non-empty string\" },\n  { n: \"match\", f: match, s: \"match {e}\" },\n  { n: \"boolean\", f: boolean, s: \"be Boolean\" },\n  { n: \"object\", f: object, s: \"be Object\" },\n  { n: \"emptyObject\", f: emptyObject, s: \"be empty object\" },\n  { n: \"nonEmptyObject\", f: nonEmptyObject, s: \"be non-empty object\" },\n  { n: \"instanceStrict\", f: instanceStrict, s: \"be instanceof {t}\" },\n  { n: \"thenable\", f: thenable, s: \"be promise-like\" },\n  { n: \"instance\", f: instance, s: \"be {t}\" },\n  { n: \"like\", f: like, s: \"be like {e}\" },\n  { n: \"array\", f: array, s: \"be Array\" },\n  { n: \"emptyArray\", f: emptyArray, s: \"be empty array\" },\n  { n: \"nonEmptyArray\", f: nonEmptyArray, s: \"be non-empty array\" },\n  { n: \"arrayLike\", f: arrayLike, s: \"be array-like\" },\n  { n: \"iterable\", f: iterable, s: \"be iterable\" },\n  { n: \"date\", f: date, s: \"be valid Date\" },\n  { n: \"function\", f: isFunction, s: \"be Function\" },\n  { n: \"hasLength\", f: hasLength, s: \"have length {e}\" },\n  { n: \"throws\", f: throws, s: \"throw\" }\n];\n\nfns.forEach(({ n, f, s }) => {\n  messages[n] = `expected {a} to ${s}`;\n  predicates[n] = f;\n});\n\nconst functions = mixin({ map, all, any }, predicates);\nconst assert = createModifiedPredicates(assertModifier, assertImpl);\nconst not = createModifiedPredicates(notModifier, notImpl);\nconst maybe = createModifiedPredicates(maybeModifier, maybeImpl);\nassert.not = createModifiedModifier(assertModifier, not, \"not \");\nassert.maybe = createModifiedModifier(assertModifier, maybe, \"maybe \");\n\ncollections.forEach(createOfPredicates);\ncreateOfModifiers(assert, assertModifier);\ncreateOfModifiers(not, notModifier);\ncollections.forEach(createMaybeOfModifiers);\n\n/**\n * Public function `equal`.\n *\n * Returns true if `lhs` and `rhs` are strictly equal, without coercion.\n * Returns false otherwise.\n */\nfunction equal(lhs, rhs) {\n  return lhs === rhs;\n}\n\n/**\n * Public function `undefined`.\n *\n * Returns true if `data` is undefined, false otherwise.\n */\nfunction isUndefined(data) {\n  return data === undefined;\n}\n\n/**\n * Public function `null`.\n *\n * Returns true if `data` is null, false otherwise.\n */\nfunction isNull(data) {\n  return data === null;\n}\n\n/**\n * Public function `assigned`.\n *\n * Returns true if `data` is not null or undefined, false otherwise.\n */\nfunction assigned(data) {\n  return data !== undefined && data !== null;\n}\n\n/**\n * Public function `primitive`.\n *\n * Returns true if `data` is a primitive type, false otherwise.\n */\nfunction primitive(data) {\n  var type;\n\n  switch (data) {\n    case null:\n    case undefined:\n    case false:\n    case true:\n      return true;\n  }\n\n  type = typeof data;\n  return (\n    type === \"string\" || type === \"number\" || (haveSymbols && type === \"symbol\")\n  );\n}\n\n/**\n * Public function `zero`.\n *\n * Returns true if `data` is zero, false otherwise.\n */\nfunction zero(data) {\n  return data === 0;\n}\n\n/**\n * Public function `one`.\n *\n * Returns true if `data` is one, false otherwise.\n */\nfunction one(data) {\n  return data === 1;\n}\n\n/**\n * Public function `infinity`.\n *\n * Returns true if `data` is positive or negative infinity, false otherwise.\n */\nfunction infinity(data) {\n  return data === neginf || data === posinf;\n}\n\n/**\n * Public function `number`.\n *\n * Returns true if `data` is a number, false otherwise.\n */\nfunction number(data) {\n  return typeof data === \"number\" && data > neginf && data < posinf;\n}\n\n/**\n * Public function `integer`.\n *\n * Returns true if `data` is an integer, false otherwise.\n */\nfunction integer(data) {\n  return typeof data === \"number\" && data % 1 === 0;\n}\n\n/**\n * Public function `float`.\n *\n * Returns true if `data` is a non-integer number, false otherwise.\n */\nfunction float(data) {\n  return number(data) && data % 1 !== 0;\n}\n\n/**\n * Public function `even`.\n *\n * Returns true if `data` is an even number, false otherwise.\n */\nfunction even(data) {\n  return typeof data === \"number\" && data % 2 === 0;\n}\n\n/**\n * Public function `odd`.\n *\n * Returns true if `data` is an odd number, false otherwise.\n */\nfunction odd(data) {\n  return integer(data) && data % 2 !== 0;\n}\n\n/**\n * Public function `greater`.\n *\n * Returns true if `lhs` is a number greater than `rhs`, false otherwise.\n */\nfunction greater(lhs, rhs) {\n  return number(lhs) && lhs > rhs;\n}\n\n/**\n * Public function `less`.\n *\n * Returns true if `lhs` is a number less than `rhs`, false otherwise.\n */\nfunction less(lhs, rhs) {\n  return number(lhs) && lhs < rhs;\n}\n\n/**\n * Public function `between`.\n *\n * Returns true if `data` is a number between `x` and `y`, false otherwise.\n */\nfunction between(data, x, y) {\n  if (x < y) {\n    return greater(data, x) && data < y;\n  }\n\n  return less(data, x) && data > y;\n}\n\n/**\n * Public function `greaterOrEqual`.\n *\n * Returns true if `lhs` is a number greater than or equal to `rhs`, false\n * otherwise.\n */\nfunction greaterOrEqual(lhs, rhs) {\n  return number(lhs) && lhs >= rhs;\n}\n\n/**\n * Public function `lessOrEqual`.\n *\n * Returns true if `lhs` is a number less than or equal to `rhs`, false\n * otherwise.\n */\nfunction lessOrEqual(lhs, rhs) {\n  return number(lhs) && lhs <= rhs;\n}\n\n/**\n * Public function `inRange`.\n *\n * Returns true if `data` is a number in the range `x..y`, false otherwise.\n */\nfunction inRange(data, x, y) {\n  if (x < y) {\n    return greaterOrEqual(data, x) && data <= y;\n  }\n\n  return lessOrEqual(data, x) && data >= y;\n}\n\n/**\n * Public function `positive`.\n *\n * Returns true if `data` is a positive number, false otherwise.\n */\nfunction positive(data) {\n  return greater(data, 0);\n}\n\n/**\n * Public function `negative`.\n *\n * Returns true if `data` is a negative number, false otherwise.\n */\nfunction negative(data) {\n  return less(data, 0);\n}\n\n/**\n * Public function `string`.\n *\n * Returns true if `data` is a string, false otherwise.\n */\nfunction string(data) {\n  return typeof data === \"string\";\n}\n\n/**\n * Public function `emptyString`.\n *\n * Returns true if `data` is the empty string, false otherwise.\n */\nfunction emptyString(data) {\n  return data === \"\";\n}\n\n/**\n * Public function `nonEmptyString`.\n *\n * Returns true if `data` is a non-empty string, false otherwise.\n */\nfunction nonEmptyString(data) {\n  return string(data) && data !== \"\";\n}\n\n/**\n * Public function `match`.\n *\n * Returns true if `data` is a string that matches `regex`, false otherwise.\n */\nfunction match(data, regex) {\n  return string(data) && !!data.match(regex);\n}\n\n/**\n * Public function `boolean`.\n *\n * Returns true if `data` is a boolean value, false otherwise.\n */\nfunction boolean(data) {\n  return data === false || data === true;\n}\n\n/**\n * Public function `object`.\n *\n * Returns true if `data` is a plain-old JS object, false otherwise.\n */\nfunction object(data) {\n  return toString.call(data) === \"[object Object]\";\n}\n\n/**\n * Public function `emptyObject`.\n *\n * Returns true if `data` is an empty object, false otherwise.\n */\nfunction emptyObject(data) {\n  return (\n    object(data) &&\n    !some(data, function() {\n      return true;\n    })\n  );\n}\n\nfunction some(data, predicate) {\n  for (var key in data) {\n    if (hasOwnProperty.call(data, key)) {\n      if (predicate(key, data[key])) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n/**\n * Public function `nonEmptyObject`.\n *\n * Returns true if `data` is a non-empty object, false otherwise.\n */\nfunction nonEmptyObject(data) {\n  return (\n    object(data) &&\n    some(data, function() {\n      return true;\n    })\n  );\n}\n\n/**\n * Public function `thenable`.\n *\n * Returns true if `data` has a `then` method.\n */\nfunction thenable(data) {\n  return assigned(data) && isFunction(data.then);\n}\n\n/**\n * Public function `instanceStrict`.\n *\n * Returns true if `data` is an instance of `prototype`, false otherwise.\n */\nfunction instanceStrict(data, prototype) {\n  try {\n    return data instanceof prototype;\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Public function `instance`.\n *\n * Returns true if `data` is an instance of `prototype`, false otherwise.\n * Falls back to testing constructor.name and Object.prototype.toString\n * if the initial instanceof test fails.\n */\nfunction instance(data, prototype) {\n  try {\n    return (\n      instanceStrict(data, prototype) ||\n      data.constructor.name === prototype.name ||\n      toString.call(data) === \"[object \" + prototype.name + \"]\"\n    );\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Public function `like`.\n *\n * Tests whether `data` 'quacks like a duck'. Returns true if `data` has all\n * of the properties of `archetype` (the 'duck'), false otherwise.\n */\nfunction like(data, archetype) {\n  var name;\n\n  for (name in archetype) {\n    if (hasOwnProperty.call(archetype, name)) {\n      if (\n        hasOwnProperty.call(data, name) === false ||\n        typeof data[name] !== typeof archetype[name]\n      ) {\n        return false;\n      }\n\n      if (object(data[name]) && like(data[name], archetype[name]) === false) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\n/**\n * Public function `array`.\n *\n * Returns true if `data` is an array, false otherwise.\n */\nfunction array(data) {\n  return isArray(data);\n}\n\n/**\n * Public function `emptyArray`.\n *\n * Returns true if `data` is an empty array, false otherwise.\n */\nfunction emptyArray(data) {\n  return isArray(data) && data.length === 0;\n}\n\n/**\n * Public function `nonEmptyArray`.\n *\n * Returns true if `data` is a non-empty array, false otherwise.\n */\nfunction nonEmptyArray(data) {\n  return isArray(data) && data.length > 0;\n}\n\n/**\n * Public function `arrayLike`.\n *\n * Returns true if `data` is an array-like object, false otherwise.\n */\nfunction arrayLike(data) {\n  return assigned(data) && data.length >= 0;\n}\n\n/**\n * Public function `iterable`.\n *\n * Returns true if `data` is an iterable, false otherwise.\n */\nfunction iterable(data) {\n  if (!haveSymbols) {\n    // Fall back to `arrayLike` predicate in pre-ES6 environments.\n    return arrayLike(data);\n  }\n\n  return assigned(data) && isFunction(data[Symbol.iterator]);\n}\n\n/**\n * Public function `contains`.\n *\n * Returns true if `data` contains `value`, false otherwise.\n * Works with objects, arrays and array-likes (including strings).\n */\nfunction contains(data, value) {\n  var iterator, iteration;\n\n  if (!assigned(data)) {\n    return false;\n  }\n\n  if (haveSets && instanceStrict(data, Set)) {\n    return data.has(value);\n  }\n\n  if (string(data)) {\n    return data.indexOf(value) !== -1;\n  }\n\n  if (haveSymbols && data[Symbol.iterator] && isFunction(data.values)) {\n    iterator = data.values();\n\n    do {\n      iteration = iterator.next();\n\n      if (iteration.value === value) {\n        return true;\n      }\n    } while (!iteration.done);\n\n    return false;\n  }\n\n  return some(data, function(key, dataValue) {\n    return dataValue === value;\n  });\n}\n\n/**\n * Public function `in`.\n *\n * Returns true if `value` is in `data`, false otherwise.\n * Like `contains`, but with arguments flipped.\n */\nfunction isIn(value, data) {\n  return contains(data, value);\n}\n\n/**\n * Public function `containsKey`.\n *\n * Returns true if `data` contains key `key`, false otherwise.\n * Works with objects, arrays and array-likes (including strings).\n */\nfunction containsKey(data, key) {\n  if (!assigned(data)) {\n    return false;\n  }\n\n  if (haveMaps && instanceStrict(data, Map)) {\n    return data.has(key);\n  }\n\n  if (iterable(data) && !number(+key)) {\n    return false;\n  }\n\n  return !!data[key];\n}\n\n/**\n * Public function `keyIn`.\n *\n * Returns true if key `key` is in `data`, false otherwise.\n * Like `contains`, but with arguments flipped.\n */\nfunction keyIn(key, data) {\n  return containsKey(data, key);\n}\n\n/**\n * Public function `hasLength`.\n *\n * Returns true if `data` has a length property that equals `length`, false\n * otherwise.\n */\nfunction hasLength(data, length) {\n  return assigned(data) && data.length === length;\n}\n\n/**\n * Public function `date`.\n *\n * Returns true if `data` is a valid date, false otherwise.\n */\nfunction date(data) {\n  return instanceStrict(data, Date) && integer(data.getTime());\n}\n\n/**\n * Public function `function`.\n *\n * Returns true if `data` is a function, false otherwise.\n */\nfunction isFunction(data) {\n  return typeof data === \"function\";\n}\n\n/**\n * Public function `throws`.\n *\n * Returns true if `data` is a function that throws, false otherwise.\n */\nfunction throws(data) {\n  if (!isFunction(data)) {\n    return false;\n  }\n\n  try {\n    data();\n  } catch (error) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Public function `map`.\n *\n * Maps each value from `data` to the corresponding predicate and returns\n * the results. If the same function is to be applied across all of the data,\n * a single predicate function may be passed in.\n */\nfunction map(data, predicates) {\n  var result;\n\n  if (isArray(data)) {\n    result = [];\n  } else {\n    result = {};\n  }\n\n  if (isFunction(predicates)) {\n    forEach(data, function(key, value) {\n      result[key] = predicates(value);\n    });\n  } else {\n    if (!isArray(predicates)) {\n      assert.object(predicates);\n    }\n\n    var dataKeys = keys(data || {});\n\n    forEach(predicates, function(key, predicate) {\n      dataKeys.some(function(dataKey, index) {\n        if (dataKey === key) {\n          dataKeys.splice(index, 1);\n          return true;\n        }\n        return false;\n      });\n\n      if (isFunction(predicate)) {\n        if (not.assigned(data)) {\n          result[key] = !!predicate.m;\n        } else {\n          result[key] = predicate(data[key]);\n        }\n      } else {\n        result[key] = map(data[key], predicate);\n      }\n    });\n  }\n\n  return result;\n}\n\nfunction forEach(object, action) {\n  for (var key in object) {\n    if (hasOwnProperty.call(object, key)) {\n      action(key, object[key]);\n    }\n  }\n}\n\n/**\n * Public function `all`\n *\n * Check that all boolean values are true\n * in an array or object returned from `map`.\n */\nfunction all(data) {\n  if (isArray(data)) {\n    return testArray(data, false);\n  }\n\n  assert.object(data);\n\n  return testObject(data, false);\n}\n\nfunction testArray(data, result) {\n  var i;\n\n  for (i = 0; i < data.length; i += 1) {\n    if (data[i] === result) {\n      return result;\n    }\n  }\n\n  return !result;\n}\n\nfunction testObject(data, result) {\n  var key, value;\n\n  for (key in data) {\n    if (hasOwnProperty.call(data, key)) {\n      value = data[key];\n\n      if (object(value) && testObject(value, result) === result) {\n        return result;\n      }\n\n      if (value === result) {\n        return result;\n      }\n    }\n  }\n\n  return !result;\n}\n\n/**\n * Public function `any`\n *\n * Check that at least one boolean value is true\n * in an array or object returned from `map`.\n */\nfunction any(data) {\n  if (isArray(data)) {\n    return testArray(data, true);\n  }\n\n  assert.object(data);\n\n  return testObject(data, true);\n}\n\nfunction mixin(target, source) {\n  forEach(source, function(key, value) {\n    target[key] = value;\n  });\n\n  return target;\n}\n\n/**\n * Public modifier `assert`.\n *\n * Throws if `predicate` returns false.\n */\nfunction assertModifier(predicate, defaultMessage) {\n  return function() {\n    var args = arguments;\n    var argCount = predicate.l || predicate.length;\n    var message = args[argCount];\n    var ErrorType = args[argCount + 1];\n\n    assertImpl(\n      predicate.apply(null, args),\n      nonEmptyString(message)\n        ? message\n        : defaultMessage\n            .replace(\"{a}\", messageFormatter(args[0]))\n            .replace(\"{e}\", messageFormatter(args[1]))\n            .replace(\"{e2}\", messageFormatter(args[2]))\n            .replace(\"{t}\", function() {\n              var arg = args[1];\n\n              if (arg && arg.name) {\n                return arg.name;\n              }\n\n              return arg;\n            }),\n      isFunction(ErrorType) ? ErrorType : TypeError\n    );\n\n    return args[0];\n  };\n}\n\nfunction messageFormatter(arg) {\n  return function() {\n    if (string(arg)) {\n      return '\"' + arg.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"') + '\"';\n    }\n\n    if (\n      arg &&\n      arg !== true &&\n      arg.constructor &&\n      !instanceStrict(arg, RegExp) &&\n      typeof arg !== \"number\"\n    ) {\n      return arg.constructor.name;\n    }\n\n    return arg;\n  };\n}\n\nfunction assertImpl(value, message, ErrorType) {\n  if (value) {\n    return value;\n  }\n  throw new (ErrorType || Error)(message || \"assert failed\");\n}\n\n/**\n * Public modifier `not`.\n *\n * Negates `predicate`.\n */\nfunction notModifier(predicate) {\n  var modifiedPredicate = function() {\n    return notImpl(predicate.apply(null, arguments));\n  };\n  modifiedPredicate.l = predicate.length;\n  return modifiedPredicate;\n}\n\nfunction notImpl(value) {\n  return !value;\n}\n\n/**\n * Public modifier `maybe`.\n *\n * Returns true if predicate argument is  null or undefined,\n * otherwise propagates the return value from `predicate`.\n */\nfunction maybeModifier(predicate) {\n  var modifiedPredicate = function() {\n    if (not.assigned(arguments[0])) {\n      return true;\n    }\n\n    return predicate.apply(null, arguments);\n  };\n  modifiedPredicate.l = predicate.length;\n\n  // Hackishly indicate that this is a maybe.xxx predicate.\n  // Without this flag, the alternative would be to iterate\n  // through the maybe predicates or use indexOf to check,\n  // which would be time-consuming.\n  modifiedPredicate.m = true;\n\n  return modifiedPredicate;\n}\n\nfunction maybeImpl(value) {\n  if (assigned(value) === false) {\n    return true;\n  }\n\n  return value;\n}\n\n/**\n * Public modifier `of`.\n *\n * Applies the chained predicate to members of the collection.\n */\nfunction ofModifier(target, type, predicate) {\n  var modifiedPredicate = function() {\n    var collection, args;\n\n    collection = arguments[0];\n\n    if (target === \"maybe\" && not.assigned(collection)) {\n      return true;\n    }\n\n    if (!type(collection)) {\n      return false;\n    }\n\n    collection = coerceCollection(type, collection);\n    args = slice.call(arguments, 1);\n\n    try {\n      collection.forEach(function(item) {\n        if (\n          (target !== \"maybe\" || assigned(item)) &&\n          !predicate.apply(null, [item].concat(args))\n        ) {\n          // TODO: Replace with for...of when ES6 is required.\n          throw 0;\n        }\n      });\n    } catch (ignore) {\n      return false;\n    }\n\n    return true;\n  };\n  modifiedPredicate.l = predicate.length;\n  return modifiedPredicate;\n}\n\nfunction coerceCollection(type, collection) {\n  switch (type) {\n    case arrayLike:\n      return slice.call(collection);\n    case object:\n      return keys(collection).map(function(key) {\n        return collection[key];\n      });\n    default:\n      return collection;\n  }\n}\n\nfunction createModifiedPredicates(modifier, object) {\n  return createModifiedFunctions([modifier, predicates, object, \"\"]);\n}\n\nfunction createModifiedFunctions(args) {\n  var modifier, messageModifier, object, functions;\n\n  modifier = args.shift();\n  messageModifier = args.pop();\n  object = args.pop();\n  functions = args.pop();\n\n  forEach(functions, function(key, fn) {\n    var message = messages[key];\n    if (message && messageModifier) {\n      message = message.replace(\"to\", messageModifier + \"to\");\n    }\n\n    Object.defineProperty(object, key, {\n      configurable: false,\n      enumerable: true,\n      writable: false,\n      value: modifier.apply(null, args.concat(fn, message))\n    });\n  });\n\n  return object;\n}\n\nfunction createModifiedModifier(modifier, modified, messageModifier) {\n  return createModifiedFunctions([modifier, modified, {}, messageModifier]);\n}\n\nfunction createOfPredicates(key) {\n  predicates[key].of = createModifiedFunctions([\n    ofModifier.bind(null, null),\n    predicates[key],\n    predicates,\n    {},\n    \"\"\n  ]);\n}\n\nfunction createOfModifiers(base, modifier) {\n  collections.forEach(function(key) {\n    base[key].of = createModifiedModifier(modifier, predicates[key].of);\n  });\n}\n\nfunction createMaybeOfModifiers(key) {\n  maybe[key].of = createModifiedFunctions([\n    ofModifier.bind(null, \"maybe\"),\n    predicates[key],\n    predicates,\n    {},\n    \"\"\n  ]);\n  assert.maybe[key].of = createModifiedModifier(assertModifier, maybe[key].of);\n  assert.not[key].of = createModifiedModifier(assertModifier, not[key].of);\n}\n\nexport default mixin(functions, { assert, not, maybe });\n","//#if !_LITE\nimport check from \"./libs/checkTypes\";\n//#endif\n\nexport const fastClone = val => {\n  //#if !_LITE\n  check.assert.not.function(val);\n  //#endif\n\n  if (typeof val !== \"object\") return val;\n\n  //#if !_LITE\n  check.assert.array(val);\n  //#endif\n\n  const arr = [];\n  const len = val.length;\n  for (let i = 0; i < len; i++) {\n    arr.push(fastClone(val[i]));\n  }\n\n  return arr;\n};\n\nexport const map = (arr, fn) => {\n  //#if !_LITE\n  check.assert.array(arr);\n  check.assert.function(fn);\n  //#endif\n\n  const out = [];\n  const len = arr.length;\n  for (let i = 0; i < len; i++) out.push(fn(arr[i]));\n  return out;\n};\n\nexport const flat = arr => {\n  //#if !_LITE\n  check.assert.array.of.array(arr);\n  //#endif\n\n  return [].concat.apply([], arr);\n};\n\nexport const combinations = mods => {\n  //#if !_LITE\n  check.assert.array(mods);\n  check.assert.array.of.nonEmptyArray(mods);\n  //#endif\n\n  let list = [[]];\n  while (mods.length)\n    list = flat(mods.shift().map(opt => list.map(prev => prev.concat([opt]))));\n  return list;\n};\n\nexport const assign = objects => {\n  //#if !_LITE\n  check.assert.nonEmptyArray(objects);\n  check.assert.array.of.nonEmptyObject(objects);\n  //#endif\n\n  const out = {};\n  const len = objects.length;\n  for (let i = 0; i < len; i++) {\n    var obj = objects[i];\n    for (let nextKey in obj) out[nextKey] = obj[nextKey];\n  }\n  return out;\n};\n\nexport const toString = value =>\n  typeof value === \"string\" ? value : value + \"\";\n","import { fastClone, map, flat, combinations, toString } from \"./utils\";\n\nexport const iteratorRegex = /\\{[a-z]+\\}/gi;\n\n// private constants\nconst _hyphenOrDigitRegex = /-|[^0-9]/g;\nconst _notUpperOrDigitRegex = /[^A-Z0-9]/g;\n\n// private helpers\nconst _expandDeclaration = subpair => `${subpair[0]}:${subpair[1]}`;\nconst _addEmptyMod = mod => [[\"\", \"\"]].concat(mod);\nconst _toCase = (s, upper) => s[`to${upper ? \"Upp\" : \"Low\"}erCase`]();\nconst _toPair = (input, isValue) => {\n  if (typeof input === \"number\") {\n    const str = toString(input);\n    return [\n      str.replace(_hyphenOrDigitRegex, match => (match === \"-\" ? \"N\" : \"\")),\n      str\n    ];\n  } else {\n    return [\n      _toCase(input.replace(_notUpperOrDigitRegex, \"\"), isValue),\n      _toCase(input, false)\n    ];\n  }\n};\n\n// parse smart map\nexport const parseSmartMap = (inputs, isValue) =>\n  inputs.length\n    ? map(inputs, input => _toPair(input, isValue))\n    : map(Object.keys(inputs), key => [toString(key), toString(inputs[key])]);\n\n// expand ainsley.defs\nexport const expandDefs = (ainsley, ruleSet) => {\n  const pair = ruleSet[1].reduce(\n    (iters, pair) => [\n      iters[0].concat(toString(pair[0]).match(iteratorRegex) || []),\n      iters[1].concat(toString(pair[1]).match(iteratorRegex) || [])\n    ],\n    [[], []]\n  );\n\n  return map(\n    combinations(\n      flat([\n        map(pair[0], iter =>\n          map(parseSmartMap(ainsley[iter]), pair => [iter, pair[0], pair[1]])\n        ),\n        map(pair[1], iter =>\n          map(parseSmartMap(ainsley[iter], true), pair => [\n            iter,\n            pair[0],\n            pair[1]\n          ])\n        )\n      ])\n    ),\n    perm => {\n      const clone = fastClone(ruleSet);\n      for (let i = 0; clone[0].includes(\"&\"); i++) {\n        clone[0] = clone[0].replace(\"&\", perm[i][1]);\n      }\n      for (let i = 0; i < clone[1].length; i++) {\n        const decl = clone[1][i];\n        while (perm.length > 0 && decl[0].includes(perm[0][0])) {\n          const first = perm.shift();\n          decl[0] = decl[0].replace(first[0], first[2]);\n        }\n      }\n      for (let i = 0; i < clone[1].length; i++) {\n        const decl = clone[1][i];\n        while (perm.length > 0 && decl[1].includes(perm[0][0])) {\n          const first = perm.shift();\n          decl[1] = decl[1].replace(first[0], first[2]);\n        }\n      }\n      return clone;\n    }\n  );\n};\n\n// expand ainsley.props\nexport const expandProps = pair => {\n  const prop = parseSmartMap([pair[0]])[0];\n  return map(parseSmartMap(pair[1], true), subpair => [\n    `${prop[0]}${subpair[0]}`,\n    [[prop[1], subpair[1]]]\n  ]);\n};\n\n// compile ainsley to a simple stylesheet ast\nexport const ainsleyToAST = ainsley => {\n  const ast = [].concat(\n    flat(map(ainsley.defs || [], def => expandDefs(ainsley, def))),\n    flat(map(ainsley.props || [], expandProps)),\n    ainsley.raw || []\n  );\n  return [ainsley.reset || \"\"].concat(\n    flat(\n      map(combinations(map(ainsley.mods || [], _addEmptyMod)), comb =>\n        comb.reduce((ast, pair) => {\n          if (!pair[1]) {\n            return ast;\n          } else if (pair[1][0] === \"@\") {\n            return [\n              [\n                pair[1],\n                map(ast, subpair => [`${pair[0]}${subpair[0]}`, subpair[1]])\n              ]\n            ];\n          } else {\n            return map(ast, subpair => [\n              `${pair[0]}${subpair[0]}${pair[1]}`,\n              subpair[1]\n            ]);\n          }\n        }, ast)\n      )\n    )\n  );\n};\n\nexport const ruleToCSS = rule => {\n  if (typeof rule === \"string\") return rule;\n  return rule[0][0] === \"@\"\n    ? `${rule[0]}{${astToCSS(rule[1])}}`\n    : `.${rule[0]}{${map(rule[1], _expandDeclaration).join(\";\")}}`;\n};\n\n// generate css from simple stylesheet ast\nexport const astToCSS = ast => map(ast, ruleToCSS).join(\"\");\n\n// generate css from ainsley\nexport const ainsleyToCSS = ainsley => astToCSS(ainsleyToAST(ainsley));\n\n// insert ainsley into a dom\nexport const ainsleyInsert = (ainsley, stylesheet) => {\n  const ast = ainsleyToAST(ainsley);\n  for (let i = ast.length - 1; i >= 0; i--) {\n    stylesheet.insertRule(ruleToCSS(ast[i]), 0);\n  }\n};\n"],"names":["messages","predicates","collections","hasOwnProperty","Object","prototype","toString","keys","slice","Array","isArray","neginf","Number","NEGATIVE_INFINITY","posinf","POSITIVE_INFINITY","haveSymbols","Symbol","haveMaps","Map","haveSets","Set","n","f","lhs","rhs","s","data","undefined","assigned","type","contains","value","containsKey","key","number","integer","greater","less","x","y","greaterOrEqual","lessOrEqual","string","nonEmptyString","regex","match","object","some","instanceStrict","isFunction","then","constructor","name","call","error","like","archetype","_typeof","length","arrayLike","iterable","Date","getTime","forEach","functions","mixin","map","result","assert","dataKeys","predicate","dataKey","index","splice","not","m","all","testArray","testObject","any","createModifiedPredicates","assertModifier","assertImpl","notModifier","notImpl","maybe","modifiedPredicate","arguments","apply","l","iterator","iteration","has","indexOf","values","next","done","dataValue","action","i","target","source","defaultMessage","args","argCount","message","ErrorType","replace","messageFormatter","arg","TypeError","RegExp","Error","ofModifier","collection","coerceCollection","item","concat","ignore","modifier","createModifiedFunctions","messageModifier","shift","pop","fn","defineProperty","configurable","enumerable","writable","createModifiedModifier","modified","createOfModifiers","base","of","bind","arr","check","array","out","len","push","flat","combinations","mods","nonEmptyArray","list","opt","prev","iteratorRegex","_hyphenOrDigitRegex","_notUpperOrDigitRegex","_expandDeclaration","subpair","_addEmptyMod","mod","_toCase","upper","parseSmartMap","inputs","isValue","input","str","_toPair","expandDefs","ainsley","ruleSet","pair","reduce","iters","iter","perm","clone","fastClone","val","includes","decl","first","expandProps","prop","ruleToCSS","rule","astToCSS","join","ast","defs","def","props","raw","reset","comb","ainsleyToAST"],"mappings":"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"}