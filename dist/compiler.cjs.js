"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=(e=require("accb"))&&"object"==typeof e&&"default"in e?e.default:e;const o=e=>{if("object"!=typeof e)return e;const t=[],r=e.length;for(let s=0;s<r;s++)t.push(o(e[s]));return t},r=(e,t)=>{const o=[],r=e.length;for(let s=0;s<r;s++)o.push(t(e[s]));return o},s=e=>[].concat.apply([],e),n=e=>{let t=[[]];for(console.log(e.length,e);e.length;)t=s(e.shift().map(e=>t.map(t=>t.concat([e]))));return t},c={flex:"fx",background:"bg",min:"n",max:"x",style:"st",overflow:"ov",cursor:"cu"},l=/\{[a-z]+\}/gi,a=e=>c[e]||e[0],p=e=>`${e[0]}:${e[1]}`,u=e=>[["",""]].concat(e),i=(e,t)=>{const s=t[1].reduce((e,t)=>[e[0].concat(t[0].match(l)||[]),e[1].concat(t[1].match(l)||[])],[[],[]]);return r(n(r(s[0].concat(s[1]),t=>r(Object.keys(e[t]),o=>[t,o,e[t][o]]))),e=>{const r=o(t);for(let t=0;r[0].includes("&");t++)r[0]=r[0].replace("&",e[t][1]);for(let t=0;t<r[1].length;t++){const o=r[1][t];for(;e.length>0&&o[0].includes(e[0][0]);){const t=e.shift();o[0]=o[0].replace(t[0],t[2])}}for(let t=0;t<r[1].length;t++){const o=r[1][t];for(;e.length>0&&o[1].includes(e[0][0]);){const t=e.shift();o[1]=o[1].replace(t[0],t[2])}}return r})},f=e=>{const t=r(e[0].split("-"),a).join("");return r(e[1],o=>[`${t}${r(o.split(" "),e=>e[0].toUpperCase()).join("")}`,[[e[0],o]]])},x=e=>{const t=[].concat(s(r(e.defs||[],t=>i(e,t))),s(r(e.props||[],f)),e.raw||[]);return s(r(n(r(e.mods||[],u)),e=>e.reduce((e,t)=>t[1]?"@"===t[1][0]?[[t[1],r(e,e=>[`${t[0]}${e[0]}`,e[1]])]]:r(e,e=>[`${t[0]}${e[0]}${t[1]}`,e[1]]):e,t)))},h=e=>"@"===e[0][0]?`${e[0]}{${g(e[1])}}`:`.${e[0]}{${r(e[1],p).join(";")}}`,g=e=>r(e,h).join(""),d=e=>g(x(e));t&&t(d),exports.ainsleyInsert=(e,t)=>{const o=x(e);for(let e=o.length-1;e>=0;e--)t.insertRule(h(o[e]),0)},exports.ainsleyToAst=x,exports.ainsleyToCss=d,exports.astToCss=g,exports.expandDefs=i,exports.expandProps=f,exports.iteratorRegex=l,exports.propFragMap=c,exports.ruleToCSS=h;
//# sourceMappingURL=compiler.cjs.js.map
